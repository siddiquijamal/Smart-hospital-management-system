{% extends "base.html" %}

{% block title %}Appointments | MediCare{% endblock %}

{% block content %}

<div class="card shadow p-4">

  <h4>Doctor: {{ doctor.name }}</h4>
  <p>Date: {{ appt.date }} | Time: {{ appt.time }}</p>

  {% if appt.status == 'approved' or appt.status == 'done' %}

    <h5 class="text-success mb-3">
      ğŸŸ Your Token Number: {{ appt.token_number }}
    </h5>

    <p>ğŸŸ¦ Current Token: {{ now_token }}</p>
    <p>ğŸ‘¥ People ahead: {{ people_ahead }}</p>
    <p>â³ Estimated wait: {{ est_minutes }} minutes</p>

  {% elif appt.status == 'pending' %}

    <div class="alert alert-info mt-3">
      â³ Your appointment is pending approval.  
      Token will be generated once the doctor approves it.
    </div>

  {% elif appt.status == 'rejected' %}

    <div class="alert alert-danger mt-3">
      âŒ Appointment rejected
      {% if appt.rejection_reason %}
        <br>Reason: {{ appt.rejection_reason }}
      {% endif %}
    </div>

  {% endif %}

  <div class="mt-3">
    {% if appt.status == 'done' %}
      <span class="badge bg-success">Completed</span>
    {% elif appt.status == 'approved' %}
      <span class="badge bg-primary">Approved</span>
    {% elif appt.status == 'pending' %}
      <span class="badge bg-warning text-dark">Pending</span>
    {% else %}
      <span class="badge bg-danger">Rejected</span>
    {% endif %}
  </div>

</div>
{% endblock %}
